<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>微信号复制</title>

  <style>
    html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;}
    /* 背景 GIF（同目录 tip.gif） */
    body{
      background:#000 url("tip.gif") center center/cover no-repeat fixed;
    }
    /* 遮罩，保证弹窗更清晰 */
    .mask{
      position:fixed;inset:0;
      background:rgba(0,0,0,.55);
    }

    /* 顶部提示（绿色字） */
    .top{
      position:fixed;left:0;right:0;
      top:calc(18px + env(safe-area-inset-top, 0));
      text-align:center;
      color:#22c55e;
      font-weight:800;
      text-shadow:0 2px 10px rgba(0,0,0,.35);
      line-height:1.6;
      padding:0 12px;
      pointer-events:none;
    }
    .top .sub{font-weight:700;color:#22c55e;opacity:.95;}

    /* 弹窗容器 */
    .wrap{
      position:fixed;inset:0;
      display:grid;
      place-items:center;
      padding:18px;
    }
    .modal{
      width:min(86vw, 520px);
      background:#fff;
      border-radius:10px;
      box-shadow:0 14px 40px rgba(0,0,0,.35);
      padding:34px 18px 28px;
      text-align:center;
    }
    .line{
      font-size:18px;
      font-weight:800;
      color:#111;
      margin-bottom:18px;
    }
    .wx{
      user-select:all;
      cursor:pointer;
      font-weight:900;
    }
    .btn{
      display:inline-block;
      width:min(220px, 70%);
      height:44px;
      line-height:44px;
      border:0;
      border-radius:4px;
      background:#22c55e;
      color:#fff;
      font-size:16px;
      font-weight:900;
      cursor:pointer;
    }
    .btn:active{transform:translateY(1px);}

    .toast{
      position:fixed;
      left:50%;
      bottom:calc(22px + env(safe-area-inset-bottom, 0));
      transform:translateX(-50%);
      background:rgba(0,0,0,.75);
      color:#fff;
      padding:10px 14px;
      border-radius:999px;
      font-size:14px;
      opacity:0;
      transition:opacity .18s ease;
      pointer-events:none;
    }
    .toast.show{opacity:1;}
  </style>
</head>

<body>
  <div class="mask"></div>

  <div class="top">
    <div>微信号：<span id="wxTop">CallMe001c</span></div>
    <div class="sub">请打开微信搜索并添加好友</div>
  </div>

  <div class="wrap">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="line">微信号：<span id="wxMid" class="wx">CallMe001c</span></div>
      <button id="copyBtn" class="btn" type="button">点击复制</button>
    </div>
  </div>

  <div id="toast" class="toast">已复制</div>

  <script>
    // 读取参数 ?w=CallMe001c
    const p = new URLSearchParams(location.search);
    const wx = (p.get('w') || 'CallMe001c').trim();

    document.getElementById('wxTop').textContent = wx;
    document.getElementById('wxMid').textContent = wx;

    const toast = document.getElementById('toast');
    let t = null;
    function showToast(msg){
      toast.textContent = msg || '已复制';
      toast.classList.add('show');
      clearTimeout(t);
      t = setTimeout(()=>toast.classList.remove('show'), 1500);
    }

    async function copyText(text){
      try{
        if(navigator.clipboard && window.isSecureContext){
          await navigator.clipboard.writeText(text);
          return true;
        }
      }catch(e){}
      try{
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.setAttribute('readonly','');
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        ta.setSelectionRange(0, ta.value.length);
        const ok = document.execCommand('copy');
        document.body.removeChild(ta);
        return ok;
      }catch(e){
        return false;
      }
    }

    async function doCopy(){
      const ok = await copyText(wx);
      showToast(ok ? '已复制' : '复制失败，请手动长按复制');
    }

    document.getElementById('copyBtn').addEventListener('click', doCopy);
    document.getElementById('wxMid').addEventListener('click', doCopy);
  </script>
</body>
</html>
